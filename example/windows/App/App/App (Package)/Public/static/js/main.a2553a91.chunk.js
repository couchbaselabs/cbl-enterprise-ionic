(this.webpackJsonpexample=this.webpackJsonpexample||[]).push([[1],{64:function(e,t,n){var r={"./ion-action-sheet.entry.js":[90,5],"./ion-alert.entry.js":[91,6],"./ion-app_8.entry.js":[92,7],"./ion-avatar_3.entry.js":[93,17],"./ion-back-button.entry.js":[94,18],"./ion-backdrop.entry.js":[95,43],"./ion-button_2.entry.js":[96,19],"./ion-card_5.entry.js":[97,20],"./ion-checkbox.entry.js":[98,21],"./ion-chip.entry.js":[99,22],"./ion-col_3.entry.js":[100,44],"./ion-datetime_3.entry.js":[101,10],"./ion-fab_3.entry.js":[102,23],"./ion-img.entry.js":[103,45],"./ion-infinite-scroll_2.entry.js":[104,46],"./ion-input.entry.js":[105,24],"./ion-item-option_3.entry.js":[106,25],"./ion-item_8.entry.js":[107,26],"./ion-loading.entry.js":[108,27],"./ion-menu_3.entry.js":[109,28],"./ion-modal.entry.js":[110,8],"./ion-nav_2.entry.js":[111,14],"./ion-popover.entry.js":[112,9],"./ion-progress-bar.entry.js":[113,29],"./ion-radio_2.entry.js":[114,30],"./ion-range.entry.js":[115,31],"./ion-refresher_2.entry.js":[116,11],"./ion-reorder_2.entry.js":[117,16],"./ion-ripple-effect.entry.js":[118,47],"./ion-route_4.entry.js":[119,32],"./ion-searchbar.entry.js":[120,33],"./ion-segment_2.entry.js":[121,34],"./ion-select_3.entry.js":[122,35],"./ion-slide_2.entry.js":[123,48],"./ion-spinner.entry.js":[124,13],"./ion-split-pane.entry.js":[125,49],"./ion-tab-bar_2.entry.js":[126,36],"./ion-tab_2.entry.js":[127,15],"./ion-text.entry.js":[128,37],"./ion-textarea.entry.js":[129,38],"./ion-toast.entry.js":[130,39],"./ion-toggle.entry.js":[131,12],"./ion-virtual-scroll.entry.js":[132,50]};function s(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(r)},s.id=64,e.exports=s},66:function(e,t,n){var r={"./ion-icon.entry.js":[133,57]};function s(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],s=t[0];return n.e(t[1]).then((function(){return n(s)}))}s.keys=function(){return Object.keys(r)},s.id=66,e.exports=s},75:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(31),o=n.n(a),c=n(23),i=n(10),u=n(52),l=n(15),h=n(45),p=n(28),d=n(0),f=n.n(d),b=n(5),x=n(2),y=n(4),g=n(36),j=n(16),m=(n(75),n(3)),v=n(7),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(console.log("%c[TEST] %s","color: #e8c93c; font-weight: bold",t),!e)throw new Error("".concat(t||"Test failed").concat(n?"\nExpecting: \n".concat("object"===typeof n?JSON.stringify(n,null,2):n):null).concat(r?"\nReceived:\n".concat("object"===typeof r?JSON.stringify(r,null,2):r):null))},O=function(){function e(t){Object(x.a)(this,e),this.onDbOpenChange=t,this.database=void 0,this.database2=void 0,this.doc=void 0,this.replicator=void 0,this.lastDocId=void 0,this.output=void 0,this.isOpen=!1,this._createdDocs=[],this._query1Results=void 0,this._queryTestResults=[],console.log("IONIC CBL ON READY");var n=new m.f;n.setEncryptionKey("secret");var r=new m.e("thedb10",n);this.database=r}return Object(y.a)(e,[{key:"openDocRepl",value:function(){}},{key:"outputChanged",value:function(e){}},{key:"out",value:function(e){this.output="object"===typeof e?JSON.stringify(e,null,2):e,this.outputChanged(this.output)}},{key:"init",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDbs();case 2:this.isOpen=!0,this.onDbOpenChange(this.isOpen),this.database.addChangeListener((function(e){console.log("DATABASE CHANGE",e,e.documentIDs)})),this.out("Opened db");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openDbs",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.open();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exists",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.exists("test","test");case 2:t=e.sent,console.log("Does it exist?",t),this.out("Exists? ".concat(t));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.database&&this.database.close(),this.isOpen=!1,this.onDbOpenChange(this.isOpen),this.out("Closed db");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compact",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.database&&this.database.compact(),this.out("Compacted db");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.deleteDatabase();case 4:this.out("Deleted db");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createIndex",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.createIndex("TypeNameIndex",m.j.valueIndex(m.w.property("type"),m.w.property("name")));case 4:return(t=m.j.fullTextIndex(m.i.property("name"))).setIgnoreAccents(!1),e.next=8,this.database.createIndex("nameFTSIndex",t);case 8:this.out("Created indexes");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteIndex",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.deleteIndex("TypeNameIndex");case 4:this.out("Deleted index");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIndexes",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getIndexes();case 4:t=e.sent,this.out("Got indexes: ".concat(t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new m.p).setString("name","Escape").setString("type","hotel").setString("asdf",null).setArray("testArray",new Array).setArray("items",["hello",{really:"cool"},123,!0]).setArray("someWithNull",[1,null,4]).setDictionary("config",{size:"large",isCool:!1}).setDate("created",new Date),r=(new m.p).setString("name","Space").setString("type","house").setDate("created",new Date),s=(new m.p).setString("name","Ice Cream").setString("type","parlour").setDate("created",new Date),a=(new m.p).setString("name","Sleep").setString("type","hotel").setDate("created",new Date),e.next=6,this.database.save(n,m.c.FAIL_ON_CONFLICT);case 6:return e.next=8,this.database.save(r);case 8:return e.next=10,this.database.save(s);case 10:return e.next=12,this.database.save(a);case 12:(t=this._createdDocs).push.apply(t,[n,r,s,a]),this.lastDocId=n.getId(),console.log("Saved document, id is",n.getId()),this.out("Saved document. Last id ".concat(n.getId())),this.doc=n;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveMany",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<1e4;t++)n=(new m.p).setString("name","Saved Doc").setString("type","hotel").setString("asdf",null).setArray("items",["hello",{really:"cool"},123,!0]).setArray("someWithNull",[1,null,4]).setDictionary("config",{size:"large",isCool:!1}).setDate("created",new Date),this.database.save(n);this.out("Saved many");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPath",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getPath();case 4:t=e.sent,this.out("DB path: ".concat(t)),console.log("DB path: ".concat(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCount",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getCount();case 4:return t=e.sent,this.out("Doc count: ".concat(t)),console.log("Doc count: ".concat(t)),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.doc){e.next=2;break}return e.abrupt("return");case 2:return this.doc.setBoolean("isAwesome",!0),e.next=5,this.database.save(this.doc);case 5:this.out("Updated document. id ".concat(this.doc.getId())),console.log("Updated document. Id is",this.doc.getId());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDocument",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:return t=e.sent,console.log("Got document",t),this.out(t.toDictionary()),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDocument",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:return t=e.sent,console.log("Deleteing document",t),e.next=8,this.database.deleteDocument(t);case 8:this.out("Deleted document ".concat(t.getId()));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purgeDocument",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastDocId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.database.getDocument(this.lastDocId);case 4:return t=e.sent,console.log("Got document",t),e.next=8,this.database.purgeDocument(t);case 8:this.out("Purged document ".concat(t.getId()));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query1",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 1"),t=m.r.select(m.u.all(),m.u.property("name"),m.u.expression(m.o.id)).from(m.d.database(this.database)).where(m.g.property("type").equalTo(m.g.string("hotel")).and(m.g.property("name").equalTo(m.g.string("Escape")))).orderBy(m.q.expression(m.o.id)),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query1From",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 1"),t=m.r.select(m.u.all().from("fun"),m.u.expression(m.g.property("name").from("fun")).as("name"),m.u.expression(m.o.id.from("fun")).as("id")).from(m.d.database(this.database).as("fun")).where(m.g.property("type").from("fun").equalTo(m.g.string("hotel"))).orderBy(m.q.expression(m.g.property("fun").from("fun"))),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinTest",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new m.p).setString("name","Madison").setString("type","location"),e.next=3,this.database.save(t);case 3:return console.log("Location doc saved",t),n=(new m.p).setString("name","Expensive").setString("type","expensive"),e.next=7,this.database.save(n);case 7:return console.log("Category doc saved",n),r=(new m.p).setString("name","Escape").setString("type","hotel").setString("hotel_locations_thing","what").setString("location_id",t.getId()).setString("category_id",n.getId()),e.next=11,this.database.save(r);case 11:return console.log("Hotel doc saved",r),console.log("Building query 2 from"),s=m.r.select(m.u.expression(m.o.id.from("categories")).as("categories.id"),m.u.expression(m.g.property("name").from("locations")).as("name"),m.u.expression(m.o.id.from("locations")).as("locations.id"),m.u.expression(m.o.id.from("hotels")).as("hotels.id")).from(m.d.database(this.database).as("hotels")).join(m.l.join(m.d.database(this.database).as("locations")).on(m.o.id.from("locations").equalTo(m.g.property("location_id").from("hotels"))),m.l.join(m.d.database(this.database).as("categories")).on(m.o.id.from("categories").equalTo(m.g.property("category_id").from("hotels")))).where(m.g.property("type").from("hotels").equalTo(m.g.string("hotel")).and(m.g.property("type").from("locations").equalTo(m.g.string("location")))),console.log("Built join query"),console.log(s.toJson()),console.log(JSON.stringify(s.toJson(),null,2)),e.next=19,s.execute();case 19:return a=e.sent,e.next=22,a.allResults();case 22:return o=e.sent,this.out(o),e.abrupt("return",o);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinTest2",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 1"),t=m.r.select(m.u.all().from("fun"),m.u.expression(m.g.property("name").from("fun")).as("name"),m.u.expression(m.o.id.from("fun")).as("fun.id")).from(m.d.database(this.database).as("fun")).where(m.g.property("type").from("fun").equalTo(m.g.string("hotel"))).orderBy(m.q.expression(m.o.id.from("fun"))),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ftsQuery",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building fts query 1"),t=m.h.index("nameFTSIndex").match("ice"),n=m.r.select(m.u.all()).from(m.d.database(this.database)).where(t),e.next=5,n.execute();case 5:r=e.sent,this._query1Results=r,console.log("Executed fts query",r),this.out("Executed fts query");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"next1",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.next();case 4:return t=e.sent,console.log("Moved next",t),this.out(t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextBatch",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.nextBatch();case 4:t=e.sent,console.log("Moved next batch",t),this.out("Next batch: ".concat(t.length));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"all1",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.allResults();case 4:t=e.sent,console.log("All results",t),this.out("All results (".concat(t.length,"): ").concat(JSON.stringify(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryDeleted",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query deleted"),t=m.r.select(m.u.all(),m.u.property("name"),m.u.expression(m.o.id)).from(m.d.database(this.database)).where(m.o.deleted),e.next=4,t.execute();case 4:return n=e.sent,this._query1Results=n,e.next=8,n.allResults();case 8:r=e.sent,console.log("Executed delete query",n),console.log(r),this.out("Executed deleted query");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query2",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Building query 2"),t=m.r.select(m.u.all(),m.u.property("name"),m.u.expression(m.o.id)).from(m.d.database(this.database)).where(m.g.property("name").equalTo(m.g.string("Saved Doc"))).orderBy(m.q.expression(m.o.id)),e.next=4,t.execute();case 4:n=e.sent,this._query1Results=n,console.log("Executed query",n),this.out("Executed query");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"all2",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._query1Results.allResults();case 4:t=e.sent,console.log("All results",t.length),this.out("All results: ".concat(t.length));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allBatched",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:t=0;case 3:return e.next=5,this._query1Results.nextBatch();case 5:if(!(n=e.sent).length){e.next=10;break}console.log("Loaded ",n.length),t+=n.length,e.next=3;break;case 10:console.log(n&&n.length),console.log("All results",t),this.out("All results: ".concat(t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"foreach1",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:return console.log("For each"),e.next=5,this._query1Results.forEach((function(e){console.log("FOR",e)}));case 5:this.out("For query");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryCreateTest",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0;t<1e4;t++)m.r.select(m.u.all(),m.u.property("name"),m.u.expression(m.o.id)).from(m.d.database(this.database)).where(m.g.property("type").equalTo(m.g.string("hotel"))).orderBy(m.q.expression(m.o.id)).execute().then((function(e){return n._queryTestResults.push(e)}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryCreateTestCleanup",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._queryTestResults.forEach((function(e){e.cleanup()})),this._queryTestResults=[];case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rsCleanup",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._query1Results){e.next=2;break}return e.abrupt("return");case 2:this._query1Results.cleanup();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"documentIdTest",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new m.p).setString("id","SuperId2").setString("_id","SuperId"),e.next=3,this.database.save(t);case 3:return n=t.getId(),console.log("Got doc id",n),e.next=7,this.database.getDocument(n);case 7:return r=e.sent,console.log("Found doc",r),console.log(r.getId()),s=m.r.select(m.u.expression(m.o.id),m.u.property("id")).from(m.d.database(this.database)).where(m.g.property("id").equalTo(m.g.string("SuperId2"))),e.next=13,s.execute();case 13:return a=e.sent,e.next=16,a.allResults();case 16:o=e.sent,console.log("Got all results",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorStart",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.database){e.next=2;break}return e.abrupt("return");case 2:if(!this.replicator){e.next=7;break}return e.next=5,this.replicator.start();case 5:return this.out("Replicator start"),e.abrupt("return");case 7:return t=this.database,n=new m.v("ws://localhost:4984/thedb5"),(r=new m.t(t,n)).setReplicatorType(m.t.ReplicatorType.PUSH_AND_PULL),r.setContinuous(!0),r.setAuthenticator(new m.a("sync_gateway","testtest")),(s=new m.s(r)).addChangeListener((function(e){console.log("Replicator change!",JSON.stringify(e)),e.error&&console.log("Error:: ",JSON.stringify(e.error))})),e.next=17,s.start();case 17:this.replicator=s,this.out("Replicator start");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorStop",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.stop();case 4:this.out("Replicator stop");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorResetCheckpoint",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.resetCheckpoint();case 4:this.out("Replicator reset checkpoint");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorGetStatus",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.replicator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.replicator.getStatus();case 4:t=e.sent,this.out("Replicator getStatus: ".concat(JSON.stringify(t)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleLogLevel",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.database.setLogLevel(m.m.ALL,m.n.VERBOSE);case 2:this.out("Log level toggled");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setFileConfig",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"replicatorTest",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a,o=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.database,n=new m.v("ws://localhost:4984/example_sg_db"),(r=new m.t(t,n)).setReplicatorType(m.t.ReplicatorType.PUSH_AND_PULL),s=new m.s(r),a=function(e){console.log("Replicator change in here!",e),null!=e.error&&console.log("Error code ::  "+e.error)},s.addChangeListener(a),e.next=9,s.start();case 9:this.replicator=s,this.out("Replicator start"),setTimeout((function(){o.out("Replicator removed"),s.removeChangeListener(a),setTimeout((function(){o.out("Replicator added again"),s.addChangeListener(a)}),2e3)}),1e4);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wait",value:function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}},{key:"replicatorTest2",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.database,n=new m.v("ws://localhost:4984/example_sg_db"),(r=new m.t(t,n)).setReplicatorType(m.t.ReplicatorType.PUSH_AND_PULL),s=1,r.setAuthenticator(new m.a("john","pass")),a=new m.s(r),o=function(e){console.log("Replicator change for!",s,e),null!=e.error&&console.log("Error code ::  "+e.error)},a.addChangeListener(o),e.next=11,a.start();case 11:return e.next=13,this.wait(2e3);case 13:return e.next=15,a.stop();case 15:return e.next=17,a.cleanup();case 17:return e.next=19,this.wait(5e3);case 19:return a.removeChangeListener(o),e.next=22,this.delete();case 22:return e.next=24,this.database.open();case 24:return a=new m.s(r),s=2,a.addChangeListener((function(e){console.log("Replicator change 222222 for!",s,e),null!=e.error&&console.log("Error code ::  "+e.error)})),e.next=29,a.start();case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"base64ToArrayBuffer",value:function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=t.charCodeAt(s);return r.buffer}},{key:"arrayBufferToBase64",value:function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,s=0;s<r;s++)t+=String.fromCharCode(n[s]);return window.btoa(t)}},{key:"blobTest",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a,o,c,i,u,l,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new m.p).setString("name","Thing").setBlob("profile",new m.b("image/jpeg",this.base64ToArrayBuffer("iVBORw0KGgoAAAANSUhEUgAAAH4AAAAsCAMAAACUu/xGAAAAq1BMVEUAAABlZVJlZVKsrJthYU+zs6Grq5ylpZazs6FlZVJfX01lZVJlZVKsrJurq5urq5xlZVKtrZ1lZVJlZVKvr52zs6GysqCoqJeqqpmzs6Grq5xlZVJgYE6zs6Gnp5mrq5yiopRjY1CRkX2rq5yzs6FlZVKRkX2goJKKineRkX2Pj3yrq5yIiHWRkX2RkX2RkX1lZVKRkX2rq5yzs6GoqJdfX02goJKHh3SHh3VrpzVsAAAAMHRSTlMAQIDHx3+Ax0Ag7qBgIA9AEFCPMLOgMO7bYKBQ24+zYNuzkY9wcAXu0oiocPFBMHYlVbK0AAAD3UlEQVRYw6SW7Y6qMBCGB0IkLfKdnB9ocFmjru7HERL03P+VnXY6bdmWjcF9f2inxjydvjMDcHy99zP693oEpTpQYjBR7W4VmzA81GoZCDn/ycrValVmYOJcKBWL1/4HnUEpupLGxOI47iQmDkfc4GEBEFyNQkClzYDKQQs3VmJBufu6G7zRWNMeUzEHUnLVWs/gy9vg4NNB4wUIPOG2h7e8NcV0HRt7QPDxfzTd4ptleB5F6ro3NtsIc7UnjMKKXyuN30ZS+PuLRMW7PN+l2vlhAZ6yqCZmcrm05stfOrwVpvEBaJWStIOpVk/gC8Rb62tjRj25Fx/fEsgqE27cluKB8GR9hDFzeX44CFbmJb9/Cn8w1ldA5tO9VD/gc8FpveTbxfi1LXWOl10Z80c0Yx7/jpyyjRtd9zuxU8ZL8FEYJjZFpg6yIfOpKsf1FJ+EUkzddKkabQ+o0zCcwMN/vZm+uLh4UmW7nptTCBVq5nUF4Y0CgBaNVip18jsPn370909cfX708/gusF3fkQfrKZHXHh45Wi8meRefvfVCfwGOZ9zx8TZ9TjWY2M6vVf4jm8e3WYrDJ1Vj4N3FHwVd6vKFCxefBMFmq7ub6UI7TMZw0SEv8ryPDVaoxPiWufhL/02zY0cm3ZH1VgxIIYa1U/nIibH/EZjjp4M/9w/x9FijbyuqdzOVH+BbWQJxHMupd4pjINhDPKVH1lslBl9g6OKb73j0wmoBHrMj691nsJ0QLn4l0/09nrIm6wv7nGdQqwjGucvPJSWjN4z8aXyBlkfK+i2gmDI/HENGjXA9uPhsUJ22p2OQFg3daaFx0/9qnWBRbOl9hHlvOw3OW/xs4Hf4rcnYzj+OeFOIHj4dtG7/2y+b3IhBGAqjUiQWQ9JI/ErDpop6gcei9z9ZIXHIhLaLSGRW8zYxIuaTZccxqsGfHDXvH4cf37Z4e3ihxVOTp5bf4E8N2u+3PWB2SP7tXsfsFl80rtOeZX/gvz6//7tmnFFzD2mkxnFgL710ToHH1eCcm/LU2aA9m027v+kBH8ipyHbACxAMWaV5I4v2ZgAzIxkUGXIqkn3xrhw4wVe8hoMmOwBmYJMiJy+lHPriNcSyrvgEgUS2h/vl1BcvSqgcZsPbbABrhgdgvhgvS6hIYsPP8MwTVR5SLZA4573xHMpCV7xGZBFmxyProfR64yNCgKh4hygjXIuvpdcbPyEayA2vsEpRHcgl6gtzr8A9ho0RlgQnBPoK4tV45gBfGQZ6KQBDqzRcjdeAqQwHUfYp+SohcQdc1/Ukm4Gw4dV6vqTkM+uQpRv8E2VPF/sPp9xSb2qlGH4AAAAASUVORK5CYII="))),e.next=3,this.database.save(t);case 3:return console.log("Saved doc",t),n=m.r.select(m.u.all(),m.u.property("name"),m.u.expression(m.o.id)).from(m.d.database(this.database)).where(m.g.property("name").equalTo(m.g.string("Thing"))),e.next=7,n.execute();case 7:return r=e.sent,e.next=10,r.allResults();case 10:return s=e.sent,console.log("Got all results",s),e.next=14,this.database.getDocument(t.getId());case 14:return a=e.sent,console.log("Got new doc",a),o=t.getBlob("profile"),e.next=19,t.getBlobContent("profile",this.database);case 19:return c=e.sent,console.log("Got blob",o),console.log("Got blob content",c),i=this.arrayBufferToBase64(c),console.log("Blob content to b64",i),u=a.getBlob("profile"),e.next=27,a.getBlobContent("profile",this.database);case 27:l=e.sent,console.log("Got new doc",a),console.log("Got new blob",u),h=this.arrayBufferToBase64(l),console.log("Got new blob content",h),console.log(h);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"testSuite",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,s,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.init();case 3:return e.next=5,this.wait(500);case 5:return e.next=7,this.delete();case 7:return e.next=9,this.init();case 9:return e.next=11,this.getCount();case 11:return t=e.sent,k(0===t,"Database is empty"),e.next=15,this.save();case 15:return e.next=17,this.getCount();case 17:return t=e.sent,k(t===this._createdDocs.length,"Count of docs equals ones we collected"),n=this.doc,k(n.getId()===this.lastDocId,"Last document id is the same as the one we stored"),e.next=23,this.getDocument();case 23:return n=e.sent,k(Object(g.isMatch)(n.toDictionary(),{name:"Escape",type:"hotel",asdf:null,testArray:[],items:["hello",{really:"cool"},123,!0],someWithNull:[1,null,4],config:{size:"large",isCool:!1}}),"Grabbing latest matches provided object"),console.log(n.toDictionary()),e.next=28,this.query1();case 28:return e.next=30,this.next1();case 30:return r=e.sent,console.log("Got ret",r),k(Object(g.isMatch)(r,{name:"Escape",thedb10:{type:"hotel"}}),"Query doc matches",{name:"Escape",thedb10:{type:"hotel"}},r),e.next=35,this.query1From();case 35:return e.next=37,this.next1();case 37:return r=e.sent,s={name:"Escape",fun:{config:{isCool:!1,size:"large"},someWithNull:[1,null,4],testArray:[],items:["hello",{really:"cool"},123,!0],asdf:null,name:"Escape",type:"hotel"}},k(Object(g.isMatch)(r,s),"Query 1 From matches",s,r),e.next=42,this.createIndex();case 42:return e.next=44,this.ftsQuery();case 44:return e.next=46,this.next1();case 46:return r=e.sent,s={thisdb3:{type:"parlour",name:"Ice Cream"}},console.log("Doing join test"),e.next=51,this.joinTest();case 51:r=e.sent,console.log("Finished join test",r),s=[{"hotels.id":r[0]["hotels.id"],"locations.id":r[0]["locations.id"],"categories.id":r[0]["categories.id"],name:"Madison"}],k(Object(g.isMatch)(r,s),"Join test matches",s,r),console.log("All tests pass!"),this.out("Tests passed"),e.next=63;break;case 59:throw e.prev=59,e.t0=e.catch(0),this.out("Tests failed: ".concat(null!==(a=e.t0.message)&&void 0!==a?a:"")),e.t0;case 63:case"end":return e.stop()}}),e,this,[[0,59]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),w=function(e){var t=e.title,n=e.expanded,r=e.onToggle,s=e.children;return Object(v.jsxs)(i.d,{className:"section",children:[Object(v.jsx)(i.f,{onClick:r,children:Object(v.jsxs)(i.g,{className:"section-header",children:[Object(v.jsx)("div",{className:"title",children:t}),n?Object(v.jsx)(i.j,{icon:j.c}):Object(v.jsx)(i.j,{icon:j.d})]})}),n?Object(v.jsx)(i.e,{children:s}):null]})},C=function(){Object(r.useRef)(null);var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(!1),o=Object(p.a)(a,2),c=o[0],u=o[1],d=Object(r.useState)({}),f=Object(p.a)(d,2),b=f[0],x=f[1],y=Object(r.useCallback)((function(e){x((function(){return Object(h.a)(Object(h.a)({},b),{},Object(l.a)({},e,!b[e]))}))}),[b]),g=Object(r.useCallback)((function(e){u(m.isOpen)}),[]),m=Object(r.useMemo)((function(){return new O(g)}),[g]),k=Object(r.useCallback)((function(){console.log("OUTPUT CHANGED",m.output),s(m.output)}),[]);return Object(r.useEffect)((function(){m.outputChanged=k}),[m.output]),Object(v.jsxs)(i.k,{children:[Object(v.jsx)(i.i,{children:Object(v.jsxs)(i.o,{children:[Object(v.jsx)(i.n,{children:"Couchbase Lite"}),Object(v.jsx)(i.c,{slot:"end",children:c?Object(v.jsxs)(i.b,{size:"small",onClick:function(){return m.close()},children:[Object(v.jsx)(i.j,{icon:j.q,color:"#ee2222",style:{fill:"#ee2222",stroke:"#ee2222",marginRight:"2px"}}),"Close DB"]}):Object(v.jsxs)(i.b,{size:"small",onClick:function(){return m.init()},children:[Object(v.jsx)(i.j,{icon:j.l,color:"#22ee22",style:{fill:"#22ee22",stroke:"#22ee22",marginRight:"2px"}}),"Open DB"]})})]})}),Object(v.jsxs)(i.h,{fullscreen:!0,children:[Object(v.jsx)(i.i,{collapse:"condense",children:Object(v.jsx)(i.o,{children:Object(v.jsx)(i.n,{size:"large",children:"Couchbase Lite"})})}),Object(v.jsx)(w,{title:"Tests",expanded:b.tests,onToggle:function(){return y("tests")},children:Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.testSuite()},children:"Test Suite"})}),Object(v.jsxs)(w,{title:"Database",expanded:b.db,onToggle:function(){return y("db")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.toggleLogLevel()},children:"Toggle Log Level"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.setFileConfig()},children:"Set File Logging Config"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.exists()},children:"DB Exists"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.delete()},children:"Delete DB"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.compact()},children:"Compact DB"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.getPath()},children:"Get DB Path"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.delete()},children:"Delete DB"})]}),Object(v.jsxs)(w,{title:"Document",expanded:b.document,onToggle:function(){return y("document")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.save()},children:"Save Document"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.saveMany()},children:"Save Many"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.getCount()},children:"Get Count"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.update()},children:"Update Document"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.getDocument()},children:"Get Document"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.deleteDocument()},children:"Delete Document"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.purgeDocument()},children:"Purge Document"})]}),Object(v.jsxs)(w,{title:"Query",expanded:b.query,onToggle:function(){return y("query")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.query1()},children:"Query 1"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.query1From()},children:"Query 1 From"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.ftsQuery()},children:"FTS Query"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.next1()},children:"Next Result 1"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.nextBatch()},children:"Next Result Batch 1"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.all1()},children:"All Results 1"})]}),Object(v.jsxs)(w,{title:"Query (misc)",expanded:b["query-misc"],onToggle:function(){return y("query-misc")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.joinTest()},children:"Join From Test"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.joinTest2()},children:"Join From Test 2"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.queryDeleted()},children:"Query Deleted"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.query2()},children:"Query many"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.all2()},children:"All Results many"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.allBatched()},children:"All Results many batched"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.foreach1()},children:"For Each 1"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.queryCreateTest()},children:"Query Memory Test"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.queryCreateTestCleanup()},children:"Query Memory Test Cleanup"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.documentIdTest()},children:"Document ID Test"})]}),Object(v.jsxs)(w,{title:"Full Text Search",expanded:b.fts,onToggle:function(){return y("fts")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.createIndex()},children:"Create Index"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.deleteIndex()},children:"Delete Index"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.getIndexes()},children:"Get Indexes"})]}),Object(v.jsx)(w,{title:"Blob",expanded:b.blob,onToggle:function(){return y("blob")},children:Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.blobTest()},children:"Blob Test"})}),Object(v.jsxs)(w,{title:"Replicator",expanded:b.replicator,onToggle:function(){return y("replicator")},children:[Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.replicatorStart()},children:"Replicator Start"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.replicatorStop()},children:"Replicator Stop"}),Object(v.jsx)(i.b,{onClick:function(){return m.replicatorResetCheckpoint()},children:"Replicator Reset Checkpoint"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.replicatorGetStatus()},children:"Replicator Get Status"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.replicatorTest()},children:"Replicator Test"}),Object(v.jsx)(i.b,{size:"small",onClick:function(){return m.replicatorTest2()},children:"Replicator Test 2"})]}),Object(v.jsx)("div",{style:{height:"500px"}})]}),Object(v.jsx)("pre",{id:"output",className:"result-pane",dangerouslySetInnerHTML:{__html:n}})]})},q=(n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),function(){return Object(v.jsx)(i.a,{children:Object(v.jsx)(u.a,{children:Object(v.jsxs)(i.m,{children:[Object(v.jsx)(c.b,{exact:!0,path:"/home",children:Object(v.jsx)(C,{})}),Object(v.jsx)(c.b,{exact:!0,path:"/",children:Object(v.jsx)(c.a,{to:"/home"})})]})})})});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=function(e){e&&e instanceof Function&&n.e(58).then(n.bind(null,150)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),a(e),o(e)}))};o.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),D()}},[[88,3,4]]]);
//# sourceMappingURL=main.a2553a91.chunk.js.map